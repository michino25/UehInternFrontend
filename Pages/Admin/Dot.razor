@page "/dot"
@using UehInternFrontend.Components

@inject IJSRuntime JS
@inject HttpClient Http
@inject IConfiguration Configuration
@inject  NavigationManager navigationManager
@using Newtonsoft.Json

@code {

    private DotModel dot = new DotModel();
    private async Task SubmitDot()
    {
        var url = "https://localhost:7000/api/Dot/add";
        var response = await Http.PostAsJsonAsync(url, dot);

        if (response.IsSuccessStatusCode)
        {
          
          await JS.InvokeVoidAsync("Tạo đọt thành công");

        }
        else
        {
            Console.WriteLine("Đã xảy ra lỗi khi gửi điểm!");
        }
    }



}

<PageTitle>Đợt</PageTitle>

<CheckUserComponent CheckRole="admin">
<ItemContent>

    <h1>nút bắt đầu đợt, ô nhập thông tin đợt, nút chỉnh sửa đợt, kết thúc đợt</h1>
    <div class="p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2  sm:p-6">
        <h3 class="mb-4 text-xl font-semibold">Tạo đợt mới</h3>
        <div class="grid grid-cols-6 gap-6">
            <div class="col-span-6 sm:col-span-3">
                <label for="magv" class="block mb-2 text-sm font-medium text-gray-900">
                    Mã đợt
                </label>
                <input type="text" @bind="@dot.madot" name="magv" id="magv" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-teal-600 focus:border-teal-600 block w-full py-2.5 px-4" required>
            </div>

            <div class="col-span-6 sm:col-span-3">
                <label for="name" class="block mb-2 text-sm font-medium text-gray-900">
                    Tên đợt
                </label>
                <input type="text" @bind="@dot.name" name="name" id="name" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-teal-600 focus:border-teal-600 block w-full py-2.5 px-4" required>
            </div>

            <div class="col-span-6 sm:col-full">
                <button @onclick="SubmitDot" class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:ring-teal-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center" type="submit">
                    Tạo đợt
                </button>
            </div>
        </div>
    </div>

    <div class="p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2  sm:p-6">
        <h3 class="mb-4 text-xl font-semibold">Thông tin đợt</h3>
        <div class="grid grid-cols-6 gap-6">
            <div class="col-span-6 sm:col-span-3">
                <label for="first-name" class="block mb-2 text-sm font-medium text-gray-900">
                    Mã đợt
                </label>
                <p class="shadow-sm border border-gray-300 text-gray-900 sm:text-sm rounded-lg block w-full p-2.5">
                    Đợt 1
                </p>
            </div>

            <div class="col-span-6 sm:col-span-3">
                <label for="name" class="block mb-2 text-sm font-medium text-gray-900">
                    Tên đợt
                </label>
                <input type="text" @bind="@dot.name" name="name" id="name" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-teal-600 focus:border-teal-600 block w-full py-2.5 px-4" required>
            </div>

            <div class="col-span-6 sm:col-full">
                <button @onclick="SubmitDot" class="text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:ring-teal-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center" type="submit">
                    Tạo đợt
                </button>
            </div>
        </div>
    </div>

</ItemContent>
</CheckUserComponent>
