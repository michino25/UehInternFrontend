@page "/sinhvien/{idSv}"
@using UehInternFrontend.Components
@inject IJSRuntime JS
@inject HttpClient Http
@inject IConfiguration Configuration
@using Newtonsoft.Json

@code {
    [Parameter] public string idSv { get; set; }

    private SinhvienModel? sinhvien = new SinhvienModel();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender) {
            await RenderDatas();
            StateHasChanged();
        }
    }

    private async Task RenderDatas()
    {
        SinhvienModel result = await GetSinhVien(idSv);
        if (result != null)
        {
            sinhvien = result;
            StateHasChanged();
        }
        else
        {
            await JS.InvokeVoidAsync("alert", "Sinh viên not found.");
        }
    }

    private async Task<SinhvienModel> GetSinhVien(string mssv)
    {
        var response = await Http.GetAsync($"https://localhost:7000/api/Sinhvien/{mssv}");
        if (response.IsSuccessStatusCode)
        {
            var content = await response.Content.ReadAsStringAsync();
            var uploadModel = JsonConvert.DeserializeObject<SinhvienModel>(content);
            return uploadModel;
        }
        else
        {
            Console.WriteLine($"Error retrieving sinh viên: {response.StatusCode}");
            return null;
        }
    }


}

<PageTitle>Chi tiết sinh viên</PageTitle>

<CheckUserComponent CheckRole="giangvien">
<ItemContent>


<div class="p-4 mb-4 bg-white border border-gray-200 rounded-lg">
<div
    class="bg-white block sm:flex items-center justify-between border-b border-gray-200 lg:mt-1.5">
    <div class="w-full mb-5">
        <div class="mb-4">

            <h1 class="text-xl font-semibold text-gray-900 sm:text-2xl">Chi tiết sinh viên @sinhvien.ten</h1>
        </div>
    </div>
</div>

<div class="p-6 bg-white border border-gray-200 rounded-lg">
    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">
        Xuất bảng điểm
    </h5>
    <p class="mb-3 font-normal text-gray-700">
        Bảng điểm tổng hợp của toàn bộ khoa sẽ được xuất file excel.
    </p>
    <button type="button" class="inline-flex items-center text-teal-700 hover:text-white border border-teal-700 hover:bg-teal-800 focus:ring-4 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">
        Xuất bảng điểm
        <svg aria-hidden="true" class="w-4 h-4 ml-2 -mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
    </button>
</div>

</div>

</ItemContent>
</CheckUserComponent>
